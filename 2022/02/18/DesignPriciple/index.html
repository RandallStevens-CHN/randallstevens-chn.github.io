

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="RandallStevens">
  <meta name="keywords" content="">
  
    <meta name="description" content="设计模式7大原则（Java 版）面向对象设计原则概述对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是面向对象设计需要解决的核心问题之一。在面向对象设计中，可维护性的复用是以设计原则为基础的。每一个原则都蕴含一些面向对象设计的思想，可以从不同的角度提升一个软件结构的设计水平。 面向对象设计原则为支持可维护性复">
<meta property="og:type" content="article">
<meta property="og:title" content="DesignPriciple">
<meta property="og:url" content="https://randallstevens-chn.github.io/2022/02/18/DesignPriciple/index.html">
<meta property="og:site_name" content="RandallStevens">
<meta property="og:description" content="设计模式7大原则（Java 版）面向对象设计原则概述对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是面向对象设计需要解决的核心问题之一。在面向对象设计中，可维护性的复用是以设计原则为基础的。每一个原则都蕴含一些面向对象设计的思想，可以从不同的角度提升一个软件结构的设计水平。 面向对象设计原则为支持可维护性复">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_1.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_2.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_3.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_4.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_5.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_6.png">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_7.gif">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_8.gif">
<meta property="og:image" content="http://oss.randallstevens.top/DesignPriciple_9.png">
<meta property="article:published_time" content="2022-02-18T14:50:16.423Z">
<meta property="article:modified_time" content="2022-05-16T17:37:08.911Z">
<meta property="article:author" content="RandallStevens">
<meta property="article:tag" content="设计原则">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://oss.randallstevens.top/DesignPriciple_1.png">
  
  
  <title>DesignPriciple - RandallStevens</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"randallstevens-chn.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":80,"cursorChar":" ♫","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.1"></head>


<body>
  <header style="height: 78vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>RandallStevens&#39;Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-books"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于我
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post_page_img.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="DesignPriciple">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-02-18 22:50" pubdate>
        2022年2月18日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.2k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      52 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">DesignPriciple</h1>
            
            <div class="markdown-body">
              <h1 id="设计模式7大原则（Java-版）"><a href="#设计模式7大原则（Java-版）" class="headerlink" title="设计模式7大原则（Java 版）"></a><strong>设计模式7大原则（Java 版）</strong></h1><h2 id="面向对象设计原则概述"><a href="#面向对象设计原则概述" class="headerlink" title="面向对象设计原则概述"></a>面向对象设计原则概述</h2><p><strong>对于面向对象软件系统的设计而言，在支持可维护性的同时，提高系统的可复用性是一个至关重要的问题，如何同时提高一个软件系统的可维护性和可复用性是面向对象设计需要解决的核心问题之一。在面向对象设计中，可维护性的复用是以设计原则为基础的。每一个原则都蕴含一些面向对象设计的思想，可以从不同的角度提升一个软件结构的设计水平。 面向对象设计原则为支持可维护性复用而诞生，这些原则蕴含在很多设计模式中，它们是从许多设计方案中总结出的指导性原则。面向对象设计原则也是我们用于评价一个设计模式的使用效果的重要指标之一</strong></p>
<p><strong>各大设计原则不是独立存在的，存在相互依赖，相互补充的关系，甚至有些原则只是某个原则的延伸，具体实现等.</strong></p>
<p><strong>使用设计模式的目的就是 尽可能低代价的实现代码功能的复用与扩充，提高代码的可维护性 ；达到高内聚低耦合</strong></p>
<h2 id="1-单一职责原则-SRP"><a href="#1-单一职责原则-SRP" class="headerlink" title="1.单一职责原则 (SRP)"></a>1.单一职责原则 (SRP)</h2><p>​    <strong>Single Responsibility Principle</strong></p>
<h3 id="单一职责定义"><a href="#单一职责定义" class="headerlink" title="单一职责定义"></a>单一职责定义</h3><blockquote>
<p>一个类只负责一个功能领域中的相应职责，或者可以定义为：就一个类而言，应该只有一个引起它变化的原因</p>
</blockquote>
<h3 id="单一职责实例"><a href="#单一职责实例" class="headerlink" title="单一职责实例"></a>单一职责实例</h3><p>​      有如下类登录、注册、支付宝押金支付、微信押金支付、套餐支付、整个结构如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//用户功能模块</span><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">userController</span>&#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     * 登录</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span><span class="hljs-params">()</span>&#123;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 注册</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">()</span>&#123;<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 押金支付(阿里)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payAliDeposit</span><span class="hljs-params">()</span>&#123;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 押金支付(微信)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payWXDeposit</span><span class="hljs-params">()</span>&#123;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 套餐支付</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payPackage</span><span class="hljs-params">()</span>&#123;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>​        如上很多功能都糅杂在一起，一个类做了很多事情，很臃肿，各个方法间无紧密联系. 所以我们可以对这个UserController进行拆解，与此同时我们应该分包，比如这个应该在xxx.xxx.userMoudule下面，可能支付相关的有公共的方法，登录抑或也有公共的方法，那边抽取成公共服务去调用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginController</span>()&#123;&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">registerController</span>()&#123;&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">depositPayController</span>()&#123;<br>    <span class="hljs-comment">// 支付宝支付</span><br>    <span class="hljs-comment">// 微信支付</span><br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">packagePayController</span>()&#123;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="2-开闭原则-OCP"><a href="#2-开闭原则-OCP" class="headerlink" title="2.开闭原则 (OCP)"></a>2.开闭原则 (OCP)</h2><p>​    <strong>Open Close Principle</strong></p>
<h3 id="开闭原则定义"><a href="#开闭原则定义" class="headerlink" title="开闭原则定义"></a>开闭原则定义</h3><blockquote>
<p>一个软件实体应当对扩展开放，对修改关闭。即软件实体应尽量在不修改原有代码的情况下进行扩展。</p>
</blockquote>
<p>  软件实体包括</p>
<ul>
<li><p>项目中的模块</p>
</li>
<li><p>抽象和类</p>
</li>
<li><p>方法  </p>
<p><strong>使用开闭原则的好处</strong>：不影响原代码的运行，提高了可维护性，复用性</p>
</li>
</ul>
<p><strong>开闭原则使用方式</strong></p>
<p>​    <strong>抽象约束</strong></p>
<ul>
<li><p>通过接口或者抽象类约束扩展，对扩展进行边界限定，不允许出现在接口或抽象类中不存在的public方法；</p>
</li>
<li><p>参数类型、引用对象尽量使用接口或者抽象类，而不是实现类；（针对抽象编程）</p>
</li>
<li><p>抽象层尽量保持稳定，一旦确定即不允许修改。</p>
</li>
</ul>
<p>​    <strong>元数据控制模块行为</strong><br>​      通过配置文件来操作数据，spring的控制反转(application.xml控制对象的创建)就是一个很典型的例子。<br>​      依赖注入是实现开闭原则的一种方式.</p>
<p>   <strong>约定优于配置</strong></p>
<p>   <strong>封装变化</strong></p>
<p>   <strong>将相同的变化封装到一个接口或者类中</strong></p>
<p>   <strong>将不同的变化封装到不同的类或者接口中（单一职责的体现）</strong></p>
<h3 id="开闭原则实例"><a href="#开闭原则实例" class="headerlink" title="开闭原则实例"></a>开闭原则实例</h3><p>  某租车系统有一个押金支付功能，支付方式有支付宝、阿里支付，后期可能还有银联支付、易支付等等，设计方案如下：</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_1.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 客户端调用-押金支付选择支付手段</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DepositPay</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(String type)</span>&#123;<br>        <span class="hljs-keyword">if</span>(type.equals(<span class="hljs-string">&quot;ali&quot;</span>))&#123;<br>            <span class="hljs-type">AliPay</span> <span class="hljs-variable">aliPay</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AliPay</span>();<br>            aliPay.pay();<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(type.equals(<span class="hljs-string">&quot;wx&quot;</span>))&#123;<br>            <span class="hljs-type">WXPay</span> <span class="hljs-variable">wxPay</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WXPay</span>();<br>            wxPay.pay();<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 支付宝支付</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AliPay</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;支付宝支付&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 微信支付</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WXPay</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;微信支付&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>在以上代码中，如果需要增加银联支付，如YLPay,那么就必须要修改DepositPay中的pay方法的源代码，增加新的判断逻辑，违反了开闭原则（对修改关闭，对扩展开放），所以现在必须重构此代码，让其遵循开闭原则，做法如下：</p>
<p>增加一个接口，使得各种具体支付实现其接口DepositPay类针对接口编程，由客户端来决定具体使用哪种支付方式<br><img src="http://oss.randallstevens.top/DesignPriciple_2.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Pay</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AliPay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Pay</span> &#123;<br>     .....<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WXPay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Pay</span>&#123;<br>     .....<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CardPay</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Pay</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;正在使用card支付&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 客户端调用-押金支付选择支付手段</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DepositPay</span> &#123;<br>    <span class="hljs-comment">//paymode写在配置文件可以直接编辑，且不需要编译，所以一般不认为更改配置文件是更改源码。</span><br>    <span class="hljs-comment">//如果一个系统能做到只需要修改配置文件，无需修改源码，那么复合开闭原则</span><br>    <span class="hljs-meta">@Autowired</span><br>    Pay payMode;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(Pay payMode)</span>&#123;<br>        payMode.pay();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="3-里式替换原则-LSP"><a href="#3-里式替换原则-LSP" class="headerlink" title="3.里式替换原则 ( LSP )"></a>3.里式替换原则 ( LSP )</h2><p>​    <strong>Liskov Substitution Principle</strong></p>
<h3 id="里氏替换原则定义"><a href="#里氏替换原则定义" class="headerlink" title="里氏替换原则定义"></a>里氏替换原则定义</h3><blockquote>
<p>定义一： 如果对每一个类型为S的对象o1，都有类型为T的对象o2，使得以T定义的所有程序P在所有的对象o1代换o2时，程序P的行为没有变化，那么类型S是类型T的子类型。</p>
<p>  第二定义：<strong>子类能够透明地替代父类的功能</strong>        </p>
</blockquote>
<p>​        子类可以透明替换父类  =&gt;  表明基类可以复用<br>​        父类无法等价替换子类  =&gt;  子类对父类的功能做了修改，实现，扩充  </p>
<p>​       实现开闭原则的关键步骤就是抽象化，而子类对基类的可以透明替换就是抽象化（实现复用）的具体实现，所以里氏替换原则是对实现抽象化的具体步骤的规范。</p>
<h3 id="里氏替换原则实例"><a href="#里氏替换原则实例" class="headerlink" title="里氏替换原则实例"></a><strong>里氏替换原则实例</strong></h3><p>​      java中的实例：Collection接口和其实现类的关系，</p>
<p>​      某租车系统客户分为普通用户和VIP客户，系统需要提供一个根据邮箱重置密码的功能。原始设计图：</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_3.png" srcset="/img/loading.gif" lazyload></p>
<p>​     在编写重置密码的时候发现，业务逻辑是一样的，存在着大量的重复代码，而且还可能增加新的用户类型，为了减少代码重复性，使用里氏替换原则进行重构</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_4.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象基类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Customer</span> &#123;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonCustomer</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Customer</span>&#123;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VIPCustomer</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Customer</span>&#123;<br>&#125;<br><span class="hljs-comment">// 重置密码逻辑在这里实现，只需要传入对应的类型即可</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResetPassword</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">resetPassword</span><span class="hljs-params">(Customer customer)</span>&#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>里氏替换原则是实现开闭原则不可或缺的手段之一</code>，<strong>在本例中，通过传递参数使用基类对象，针对抽象编程，从而满足开闭原则。</strong></p>
<h2 id="4-依赖倒置原则-DIP"><a href="#4-依赖倒置原则-DIP" class="headerlink" title="4.依赖倒置原则  (DIP)"></a>4.依赖倒置原则  (DIP)</h2><p>​    <strong>Dependence Inversion Principle</strong></p>
<h3 id="依赖倒转原则定义"><a href="#依赖倒转原则定义" class="headerlink" title="依赖倒转原则定义"></a>依赖倒转原则定义</h3><blockquote>
<p>抽象不应该依赖于细节，细节应当依赖于抽象。即面向接口编程</p>
</blockquote>
<p>​     在实现依赖倒转原则时，我们需要针对抽象层编程，而将具体类的对象通过依赖注入(DependencyInjection, DI)的方式注入到其他对象中，依赖注入是指当一个对象要与其他对象发生依赖关系时，通过抽象来注入所依赖的对象。</p>
<p> 常用的注入方式有三种，分别是：构造注入，设值注入（Setter注入）和接口注入<br><strong>依赖倒转原则实例</strong>：</p>
<p>​      如OCP原则中的实例各种支付方式依赖pay接口，java中collection接口和实现类</p>
<h2 id="5-接口隔离原则-ISP"><a href="#5-接口隔离原则-ISP" class="headerlink" title="5.接口隔离原则 (ISP)"></a>5.接口隔离原则 (ISP)</h2><p>​    <strong>Interface Segregation Principle</strong></p>
<h3 id="接口隔离原则定义"><a href="#接口隔离原则定义" class="headerlink" title="接口隔离原则定义"></a>接口隔离原则定义</h3><blockquote>
<ol>
<li>使用多个专门的接口，而不使用单一的总接口，即不应该依赖那些它不需要的接口（最小接口）</li>
<li>类间的依赖关系应该建立在最小的接口上 </li>
</ol>
</blockquote>
<p>​     一个类实现一个接口时，这个接口中应该只有该类用到的抽象方法，否则就会造成该类仍需实现它所以用不到的方法，造成了接口污染。</p>
<h3 id="接口隔离原则实例"><a href="#接口隔离原则实例" class="headerlink" title="接口隔离原则实例"></a>接口隔离原则实例</h3><p>接口IAnimal有两个实现类，Bird和Tony,但明显IAnimal中某些方法子类用不到，一次要对接口进行重构</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_5.png" srcset="/img/loading.gif" lazyload></p>
<p>  接口重构：将接口拆分若干个子接口，按需继承</p>
<p>​     <img src="http://oss.randallstevens.top/DesignPriciple_6.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="6-合成复用原则-CRP"><a href="#6-合成复用原则-CRP" class="headerlink" title="6.合成复用原则 (CRP)"></a>6.合成复用原则 (CRP)</h2><p>​    <strong>Composite Reuse Principle</strong></p>
<h3 id="合成复用原则定义"><a href="#合成复用原则定义" class="headerlink" title="合成复用原则定义"></a>合成复用原则定义</h3><blockquote>
<p>通过将已有的对象纳入新对象中，作为新对象的成员对象来实现的，新对象可以调用已有对象的功能，从而达到复用。</p>
</blockquote>
<p> 在软件复用时，要尽量先使用组合或者聚合等关联关系来实现，其次才考虑使用继承关系来实现。如果要使用继承关系，则必须严格遵循里氏替换原则。合成复用原则同里氏替换原则相辅相成的，两者都是开闭原则的具体实现规范。</p>
<p>复用分为继承复用和合成复用两种，继承复用虽然有简单和易实现的优点，但它也存在以下缺点。</p>
<ol>
<li>继承复用破坏了类的封装性。因为继承会将父类的实现细节暴露给子类，父类对子类是透明的，所以这种复用又称为“白箱”复用。</li>
<li>子类与父类的耦合度高。父类的实现的任何改变都会导致子类的实现发生变化，这不利于类的扩展与维护。</li>
<li>它限制了复用的灵活性。从父类继承而来的实现是静态的，在编译时已经定义，所以在运行时不可能发生变化。</li>
</ol>
<p>采用组合或聚合复用时，可以将已有对象纳入新对象中，使之成为新对象的一部分（属性），新对象可以调用已有对象的功能，它有以下优点。</p>
<ol>
<li><p>它维持了类的封装性。因为成分对象的内部细节是新对象看不见的，所以这种复用又称为“黑箱”复用。</p>
</li>
<li><p>新旧类之间的耦合度低。这种复用所需的依赖较少，新对象存取成分对象的唯一方法是通过成分对象的接口。</p>
</li>
<li><p>复用的灵活性高。这种复用可以在运行时动态进行，新对象可以动态地引用与成分对象类型相同的对象。</p>
<p><strong>合成复用原则实现方式</strong>：构造器注入，属性注入，方法传参   即如spring中依赖注入方式</p>
</li>
</ol>
<h3 id="合成复用原则实例"><a href="#合成复用原则实例" class="headerlink" title="合成复用原则实例"></a>合成复用原则实例</h3><p><img src="http://oss.randallstevens.top/DesignPriciple_7.gif" srcset="/img/loading.gif" lazyload></p>
<p>   用继承关系实现会产生很多子类，而且增加新的“动力源”或者增加新的“颜色”都要修改源代码，这违背了开闭原则，显然不可取。但如果改用组合关系实现就能很好地解决以上问题，其类图如图 2 所示。</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_8.gif" srcset="/img/loading.gif" lazyload></p>
<p>​       Color以属性的形式聚合在类Car中</p>
<h2 id="7-迪米特法则-最少知道原则-LoD-LKP"><a href="#7-迪米特法则-最少知道原则-LoD-LKP" class="headerlink" title="7.迪米特法则/最少知道原则 (LoD  /LKP)"></a>7.迪米特法则/最少知道原则 (LoD  /LKP)</h2><p>​    <strong>Law of Demeter / Least Knowledge Principle</strong></p>
<h3 id="迪米特法则定义"><a href="#迪米特法则定义" class="headerlink" title="迪米特法则定义"></a>迪米特法则定义</h3><blockquote>
<p>一个对象应该对其他对象有最少的理解。通俗地讲，一个类应该对自己需要耦合或调用的类知道得最少，你（被调用或耦合的类）的内部是如何地复杂与我无关，那是你的事情，我就知道你提供了这么多的public方法，我就调用这么多，其他我一概不关心。</p>
</blockquote>
<p> 特点：</p>
<ul>
<li>只和朋友交流</li>
</ul>
<p>​      朋友类的定义是这样的：出现在成员变量、方法的输入输出参数中的类称为成员朋友类，而出现在方法体内部的类不属于朋友类。</p>
<p> 即不要让陌生类出现在方法中，使用中介的形式与形式与陌生类交流</p>
<h3 id="迪米特法则实例"><a href="#迪米特法则实例" class="headerlink" title="迪米特法则实例"></a>迪米特法则实例</h3><p>明星由于全身心投入艺术，所以许多日常事务由经纪人负责处理，如和粉丝的见面会，和媒体公司的业务洽淡等。这里的经纪人是明星的朋友，而粉丝和媒体公司是陌生人，所以适合使用迪米特法则。</p>
<p><img src="http://oss.randallstevens.top/DesignPriciple_9.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//明星</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Star</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//粉丝</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fans</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//公司</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Company</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//经济人</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Agent</span> &#123;<br>    <span class="hljs-comment">//聚合其他类作为属性</span><br>    <span class="hljs-keyword">private</span> Star star;<br>    <span class="hljs-keyword">private</span> Fans fans;<br>    <span class="hljs-keyword">private</span> Company company;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStar</span><span class="hljs-params">(Star star)</span> &#123;<br>        <span class="hljs-built_in">this</span>.star = star;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFans</span><span class="hljs-params">(Fans fans)</span> &#123;<br>        <span class="hljs-built_in">this</span>.fans = fans;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCompany</span><span class="hljs-params">(Company company)</span> &#123;<br>        <span class="hljs-built_in">this</span>.company = company;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">meeting</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(fans.getName() + <span class="hljs-string">&quot;与明星&quot;</span> + star.getName() + <span class="hljs-string">&quot;见面了。&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">business</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(company.getName() + <span class="hljs-string">&quot;与明星&quot;</span> + star.getName() + <span class="hljs-string">&quot;洽淡业务。&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><p>​     <strong>SOLID</strong>: 意为 可靠的   是指面向对象的5大设计原则（共有7大原则省略了迪米特和合成复用原则）。寓意着代码使用设计模式也会使得代码变得可靠，强大，具有的健壮性和可重构性.</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计原则</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/03/08/Git%E6%93%8D%E4%BD%9C/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Git使用</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    RandallStevens1
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":300,"height":600},"mobile":{"show":true,"scale":0.5},"rect":{"opacity":1},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
